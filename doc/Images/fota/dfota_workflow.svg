<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="508px" preserveAspectRatio="none" style="width:603px;height:508px;background:#F0F0F0;" version="1.1" viewBox="0 0 603 508" width="603px" zoomAndPan="magnify"><defs><filter height="300%" id="f6nmmyo0isi4f" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="127" cy="20" fill="#000000" filter="url(#f6nmmyo0isi4f)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f6nmmyo0isi4f)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="203" x="25.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="183" x="35.5" y="71.1387">User checks firmware version</text><path d="M222.5,108.3867 L222.5,116.9531 L202.5,120.9531 L222.5,124.9531 L222.5,133.5195 A0,0 0 0 0 222.5,133.5195 L462.5,133.5195 A0,0 0 0 0 462.5,133.5195 L462.5,118.3867 L452.5,108.3867 L222.5,108.3867 A0,0 0 0 0 222.5,108.3867 " fill="#FBFB77" filter="url(#f6nmmyo0isi4f)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M452.5,108.3867 L452.5,118.3867 L462.5,118.3867 L452.5,108.3867 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="228.5" y="125.4536">Read from modem with AT+QGMR</text><rect fill="#FEFECE" filter="url(#f6nmmyo0isi4f)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="51.5" y="103.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="61.5" y="125.1074">Read current version</text><path d="M264,154.7891 L264,170.9219 L244,174.9219 L264,178.9219 L264,195.0547 A0,0 0 0 0 264,195.0547 L591,195.0547 A0,0 0 0 0 591,195.0547 L591,164.7891 L581,154.7891 L264,154.7891 A0,0 0 0 0 264,154.7891 " fill="#FBFB77" filter="url(#f6nmmyo0isi4f)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M581,154.7891 L581,164.7891 L591,164.7891 L581,154.7891 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="270" y="171.856">Simple file format:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="270" y="186.9888">&lt;current versions&gt;:&lt;new version&gt;:&lt;delta file&gt;</text><rect fill="#FEFECE" filter="url(#f6nmmyo0isi4f)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="234" x="10" y="157.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="214" x="20" y="179.0762">Download versions file from server</text><path d="M186,219.4727 L186,228.0391 L166,232.0391 L186,236.0391 L186,244.6055 A0,0 0 0 0 186,244.6055 L475,244.6055 A0,0 0 0 0 475,244.6055 L475,229.4727 L465,219.4727 L186,219.4727 A0,0 0 0 0 186,219.4727 " fill="#FBFB77" filter="url(#f6nmmyo0isi4f)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M465,219.4727 L465,229.4727 L475,229.4727 L465,219.4727 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="192" y="236.5396">based on current version, get &lt;delta file&gt;</text><rect fill="#FEFECE" filter="url(#f6nmmyo0isi4f)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="88" y="215.0547"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="98" y="236.1934">parse file</text><path d="M258,317.4258 L258,333.5586 L238,337.5586 L258,341.5586 L258,357.6914 A0,0 0 0 0 258,357.6914 L450,357.6914 A0,0 0 0 0 450,357.6914 L450,327.4258 L440,317.4258 L258,317.4258 A0,0 0 0 0 258,317.4258 " fill="#FBFB77" filter="url(#f6nmmyo0isi4f)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M440,317.4258 L440,327.4258 L450,327.4258 L440,317.4258 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="264" y="334.4927">use command</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="264" y="349.6255">AT+QFOTADL=&lt;httpURL&gt;</text><rect fill="#FEFECE" filter="url(#f6nmmyo0isi4f)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="222" x="16" y="320.5742"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="202" x="26" y="341.7129">Download &amp; install new firmware</text><polygon fill="#FEFECE" filter="url(#f6nmmyo0isi4f)" points="73.5,269.0234,180.5,269.0234,192.5,281.0234,180.5,293.0234,73.5,293.0234,61.5,281.0234,73.5,269.0234" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="131" y="303.2339">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="73.5" y="284.8315">user allows update</text><polygon fill="#FEFECE" filter="url(#f6nmmyo0isi4f)" points="127,377.6914,139,389.6914,127,401.6914,115,389.6914,127,377.6914" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f6nmmyo0isi4f)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="74" y="421.6914"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="84" y="442.8301">reboot device</text><ellipse cx="127" cy="486.6602" fill="#FFFFFF" filter="url(#f6nmmyo0isi4f)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="127" cy="486.6602" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="127" y1="30" y2="50"/><polygon fill="#A80036" points="123,40,127,50,131,40,127,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="127" y1="83.9688" y2="103.9688"/><polygon fill="#A80036" points="123,93.9688,127,103.9688,131,93.9688,127,97.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="127" y1="137.9375" y2="157.9375"/><polygon fill="#A80036" points="123,147.9375,127,157.9375,131,147.9375,127,151.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="127" y1="191.9063" y2="215.0547"/><polygon fill="#A80036" points="123,205.0547,127,215.0547,131,205.0547,127,209.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="127" y1="293.0234" y2="320.5742"/><polygon fill="#A80036" points="123,310.5742,127,320.5742,131,310.5742,127,314.5742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="192.5" x2="460" y1="281.0234" y2="281.0234"/><polygon fill="#A80036" points="456,327.5586,460,337.5586,464,327.5586,460,331.5586" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="460" x2="460" y1="281.0234" y2="389.6914"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="460" x2="139" y1="389.6914" y2="389.6914"/><polygon fill="#A80036" points="149,385.6914,139,389.6914,149,393.6914,145,389.6914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="127" y1="354.543" y2="377.6914"/><polygon fill="#A80036" points="123,367.6914,127,377.6914,131,367.6914,127,371.6914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="127" y1="249.0234" y2="269.0234"/><polygon fill="#A80036" points="123,259.0234,127,269.0234,131,259.0234,127,263.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="127" y1="401.6914" y2="421.6914"/><polygon fill="#A80036" points="123,411.6914,127,421.6914,131,411.6914,127,415.6914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="127" x2="127" y1="455.6602" y2="475.6602"/><polygon fill="#A80036" points="123,465.6602,127,475.6602,131,465.6602,127,469.6602" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a1e0806046b8893d1475e1f4fbbb0e7b]
@startuml
skinparam BackgroundColor F0F0F0
start
:User checks firmware version;
:Read current version;
note right
    Read from modem with AT+QGMR
end note
:Download versions file from server;
note right
    Simple file format:
    <current versions>:<new version>:<delta file>
end note
:parse file;
note right
    based on current version, get <delta file>
end note
if (user allows update) then (yes)
    :Download & install new firmware;
    note right
        use command
        AT+QFOTADL=<httpURL>
    end note
endif
:reboot device;
stop
@enduml

PlantUML version 1.2020.02(Sun Mar 01 05:22:07 EST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.14.1+1-post-Debian-1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>