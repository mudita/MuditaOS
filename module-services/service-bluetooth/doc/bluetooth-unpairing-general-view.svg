<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="314px" preserveAspectRatio="none" style="width:781px;height:314px;background:#F0F0F0;" version="1.1" viewBox="0 0 781 314" width="781px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tr2778tl3gcr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="72.5" y="197.6328"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="275.5" y="168.5"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="420" y="69.4297"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="420" y="226.7656"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="58.2656" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="692" y="48.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="692" y1="48.2969" y2="106.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="702" y1="48.2969" y2="106.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="702" y1="48.2969" y2="48.2969"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="117.5313" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="692" y="147.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="692" y1="147.3672" y2="264.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="702" y1="147.3672" y2="264.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="77" x2="77" y1="38.2969" y2="106.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="77" x2="77" y1="106.5625" y2="147.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="77" x2="77" y1="147.3672" y2="273.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280.5" x2="280.5" y1="38.2969" y2="106.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="280.5" x2="280.5" y1="106.5625" y2="147.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="280.5" x2="280.5" y1="147.3672" y2="273.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="424.5" x2="424.5" y1="38.2969" y2="106.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="424.5" x2="424.5" y1="106.5625" y2="147.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="424.5" x2="424.5" y1="147.3672" y2="273.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="697" x2="697" y1="38.2969" y2="106.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="697" x2="697" y1="106.5625" y2="147.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="697" x2="697" y1="147.3672" y2="273.8984"/><rect fill="#FEFECE" filter="url(#f1tr2778tl3gcr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="15" y="22.9951">Worker Bluetooth</text><rect fill="#FEFECE" filter="url(#f1tr2778tl3gcr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="8" y="272.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="15" y="292.8936">Worker Bluetooth</text><rect fill="#FEFECE" filter="url(#f1tr2778tl3gcr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="210.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="217.5" y="22.9951">Service Bluetooth</text><rect fill="#FEFECE" filter="url(#f1tr2778tl3gcr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="210.5" y="272.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="217.5" y="292.8936">Service Bluetooth</text><rect fill="#FEFECE" filter="url(#f1tr2778tl3gcr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="360.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="367.5" y="22.9951">Database Agent</text><rect fill="#FEFECE" filter="url(#f1tr2778tl3gcr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="360.5" y="272.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="367.5" y="292.8936">Database Agent</text><rect fill="#FEFECE" filter="url(#f1tr2778tl3gcr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="620" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="627" y="22.9951">Application Settings</text><rect fill="#FEFECE" filter="url(#f1tr2778tl3gcr)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="620" y="272.8984"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="627" y="292.8936">Application Settings</text><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="72.5" y="197.6328"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="275.5" y="168.5"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="420" y="69.4297"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="420" y="226.7656"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="58.2656" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="692" y="48.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="692" y1="48.2969" y2="106.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="702" y1="48.2969" y2="106.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="702" y1="48.2969" y2="48.2969"/><rect fill="#FFFFFF" filter="url(#f1tr2778tl3gcr)" height="117.5313" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="692" y="147.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="692" y1="147.3672" y2="264.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="702" y1="147.3672" y2="264.8984"/><polygon fill="#A80036" points="441,65.4297,431,69.4297,441,73.4297,437,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="435" x2="691" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="447" y="64.3638">register cb on bonded devices change</text><polygon fill="#A80036" points="680,94.5625,690,98.5625,680,102.5625,684,98.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="425" x2="686" y1="98.5625" y2="98.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="432" y="93.4966">bonded devices callback</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="388.75" y="130.7729"/><polygon fill="#A80036" points="296.5,164.5,286.5,168.5,296.5,172.5,292.5,168.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="290.5" x2="691" y1="168.5" y2="168.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="302.5" y="163.4341">forget device msg(address)</text><polygon fill="#A80036" points="93.5,193.6328,83.5,197.6328,93.5,201.6328,89.5,197.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="279.5" y1="197.6328" y2="197.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="99.5" y="192.5669">command(unpair, address)</text><polygon fill="#A80036" points="408,222.7656,418,226.7656,408,230.7656,412,226.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="77.5" x2="414" y1="226.7656" y2="226.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="84.5" y="221.6997">update bonded devices</text><polygon fill="#A80036" points="680,251.8984,690,255.8984,680,259.8984,684,255.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="425" x2="686" y1="255.8984" y2="255.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="432" y="250.8325">bonded devices callback</text><!--MD5=[8744211fe1e6f1039a29b7206867593f]
@startuml
skinparam BackgroundColor F0F0F0

participant "Worker Bluetooth" as workbt
participant "Service Bluetooth" as srvbt
participant "Database Agent" as sett
participant "Application Settings" as appsett

activate appsett
appsett -> sett : register cb on bonded devices change
    activate sett
appsett <- sett : bonded devices callback
    deactivate sett
        ... ...

appsett->srvbt : forget device msg(address)
    activate srvbt
    srvbt -> workbt : command(unpair, address)
        deactivate srvbt
        activate workbt


        workbt -> sett : update bonded devices
        deactivate workbt
            activate sett
appsett <- sett : bonded devices callback
            deactivate sett

@enduml

PlantUML version 1.2020.02(Sun Mar 01 05:22:07 EST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.12+7-post-Debian-2
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>