<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="494px" preserveAspectRatio="none" style="width:767px;height:494px;background:#F0F0F0;" version="1.1" viewBox="0 0 767 494" width="767px" zoomAndPan="magnify"><defs><filter height="300%" id="f900ulwioappb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="80.5" y="69.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="69.4297" y2="77.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="90.5" y1="69.4297" y2="77.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80.5" x2="90.5" y1="69.4297" y2="69.4297"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="21.1328" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="80.5" y="105.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="105.4297" y2="126.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="90.5" y1="105.4297" y2="126.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80.5" x2="90.5" y1="126.5625" y2="126.5625"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="229" y="155.6953"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="399.5" y="213.9609"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="21.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="568.5" y="48.2969"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="319.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="568.5" y="126.5625"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="708.5" y="272.2266"/><rect fill="#F0F0F0" filter="url(#f900ulwioappb)" height="121.3359" style="stroke: #000000; stroke-width: 2.0;" width="645" x="13" y="316.3594"/><rect fill="#F0F0F0" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="645" x="13" y="362.625"/><rect fill="#F0F0F0" height="31.1328" style="stroke: none; stroke-width: 1.0;" width="645" x="13" y="406.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="85" y1="38.2969" y2="77.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="85" x2="85" y1="77.4297" y2="105.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="85" x2="85" y1="105.4297" y2="454.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234" x2="234" y1="38.2969" y2="77.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="234" x2="234" y1="77.4297" y2="105.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234" x2="234" y1="105.4297" y2="454.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="404" x2="404" y1="38.2969" y2="77.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="404" x2="404" y1="77.4297" y2="105.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="404" x2="404" y1="105.4297" y2="454.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="573" x2="573" y1="38.2969" y2="77.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="573" x2="573" y1="77.4297" y2="105.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="573" x2="573" y1="105.4297" y2="454.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="713" x2="713" y1="38.2969" y2="77.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="713" x2="713" y1="77.4297" y2="105.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="713" x2="713" y1="105.4297" y2="454.6953"/><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="23" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="30" y="22.9951">AutoLock Timer</text><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="23" y="453.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="30" y="473.6904">AutoLock Timer</text><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="158" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="165" y="22.9951">PhoneLock Handler</text><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="158" y="453.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="165" y="473.6904">PhoneLock Handler</text><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="320" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="327" y="22.9951">PhoneMode Observer</text><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="320" y="453.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="327" y="473.6904">PhoneMode Observer</text><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="499" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="506" y="22.9951">Application Manger</text><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="499" y="453.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="506" y="473.6904">Application Manger</text><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="667" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="674" y="22.9951">Application</text><rect fill="#FEFECE" filter="url(#f900ulwioappb)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="667" y="453.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="674" y="473.6904">Application</text><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="8" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="80.5" y="69.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="69.4297" y2="77.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="90.5" y1="69.4297" y2="77.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80.5" x2="90.5" y1="69.4297" y2="69.4297"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="21.1328" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="80.5" y="105.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="105.4297" y2="126.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="90.5" y1="105.4297" y2="126.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="80.5" x2="90.5" y1="126.5625" y2="126.5625"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="229" y="155.6953"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="399.5" y="213.9609"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="21.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="568.5" y="48.2969"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="319.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="568.5" y="126.5625"/><rect fill="#FFFFFF" filter="url(#f900ulwioappb)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="708.5" y="272.2266"/><polygon fill="#A80036" points="101.5,65.4297,91.5,69.4297,101.5,73.4297,97.5,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="95.5" x2="572.5" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="107.5" y="64.3638">(re)start</text><polygon fill="#A80036" points="556.5,122.5625,566.5,126.5625,556.5,130.5625,560.5,126.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="85.5" x2="562.5" y1="126.5625" y2="126.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="92.5" y="121.4966">onPhoneLock</text><polygon fill="#A80036" points="250,151.6953,240,155.6953,250,159.6953,246,155.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="244" x2="567.5" y1="155.6953" y2="155.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="256" y="150.6294">isLocked</text><polygon fill="#A80036" points="556.5,180.8281,566.5,184.8281,556.5,188.8281,560.5,184.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="234" x2="562.5" y1="184.8281" y2="184.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="241" y="179.7622">response</text><polygon fill="#A80036" points="420.5,209.9609,410.5,213.9609,420.5,217.9609,416.5,213.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="414.5" x2="567.5" y1="213.9609" y2="213.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="426.5" y="208.895">isTetheringOn</text><polygon fill="#A80036" points="556.5,239.0938,566.5,243.0938,556.5,247.0938,560.5,243.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="404.5" x2="562.5" y1="243.0938" y2="243.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="411.5" y="238.0278">response</text><polygon fill="#A80036" points="696.5,268.2266,706.5,272.2266,696.5,276.2266,700.5,272.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="578.5" x2="702.5" y1="272.2266" y2="272.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="585.5" y="267.1606">preventsAutolock</text><polygon fill="#A80036" points="589.5,297.3594,579.5,301.3594,589.5,305.3594,585.5,301.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="583.5" x2="712.5" y1="301.3594" y2="301.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="595.5" y="296.2935">response</text><path d="M13,316.3594 L77,316.3594 L77,323.3594 L67,333.3594 L13,333.3594 L13,316.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="121.3359" style="stroke: #000000; stroke-width: 2.0;" width="645" x="13" y="316.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="329.4263">alt</text><a href="" target="_top" title="" xlink:actuate="onRequest" xlink:href="" xlink:show="new" xlink:title="" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="57" x="92" y="328.5698">is locked</text></a><polygon fill="#A80036" points="96.5,350.625,86.5,354.625,96.5,358.625,92.5,354.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="567.5" y1="354.625" y2="354.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="102.5" y="349.5591">stop</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="658" y1="363.625" y2="363.625"/><a href="" target="_top" title="" xlink:actuate="onRequest" xlink:href="" xlink:show="new" xlink:title="" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="215" x="18" y="373.8354">tetheringIsOn || preventsAutolock</text></a><polygon fill="#A80036" points="96.5,394.5625,86.5,398.5625,96.5,402.5625,92.5,398.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90.5" x2="567.5" y1="398.5625" y2="398.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="102.5" y="393.4966">restart</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="658" y1="407.5625" y2="407.5625"/><polygon fill="#A80036" points="245,425.6953,235,429.6953,245,433.6953,241,429.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="239" x2="567.5" y1="429.6953" y2="429.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="251" y="424.6294">request lock</text><!--MD5=[eea8b7c340aa3510b9c46048aa7426b2]
@startuml
skinparam BackgroundColor F0F0F0

participant "AutoLock Timer" as timer
participant "PhoneLock Handler" as lock
participant "PhoneMode Observer" as obs
participant "Application Manger" as apm
participant "Application" as app

activate apm
apm -> timer : (re)start
deactivate apm
activate timer

...

timer-> apm : onPhoneLock
deactivate timer
activate apm

apm->lock : isLocked
activate lock
lock- ->apm : response
deactivate lock

apm->obs : isTetheringOn
activate obs
    obs- ->apm : response
deactivate obs

apm->app : preventsAutolock
activate app
    app- ->apm : response
deactivate app

alt [ is locked ]
    apm->timer : stop
else [ tetheringIsOn || preventsAutolock]
    apm -> timer : restart
else
    apm -> lock : request lock
end

@enduml

PlantUML version 1.2020.02(Sun Mar 01 05:22:07 EST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.12+7-post-Debian-2
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>